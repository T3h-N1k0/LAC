{% from "_formhelpers.html" import render_formfield, render_fieldlist %}
{% extends "layout.html" %}

{% block title %} Editer le compte {{ uid }} {% endblock title %}

{% block head_js %}
<script type="text/javascript" src="{{
         url_for('static', filename='jquery-2.1.1.js')
         }}"></script>

<script type="text/javascript" src="{{
         url_for('static', filename='fieldset.js')
         }}"></script>

<script type="text/javascript" src="{{
         url_for('static', filename='custom_listbox.js')
         }}"></script>

<script type="text/javascript" id="js">
 $(document).ready(function(){
   $('#wrk_groupz-available_groupz').dblclick(function() {
     selectFromList('#wrk_groupz-available_groupz', '#wrk_groupz-selected_groupz');
   });
   $('#wrk_groupz-selected_groupz').dblclick(function() {
     removeFromList('#wrk_groupz-available_groupz', '#wrk_groupz-selected_groupz');
   });
   $('#toPage').click(function() {
     selectFromList('#wrk_groupz-available_groupz', '#wrk_groupz-selected_groupz');
   });
   $('#toAvailable').click(function(){
     removeFromList('#wrk_groupz-available_groupz', '#wrk_groupz-selected_groupz');
   });
   $('#searchGroupzFilter').keyup(function() {
     var searchArea = $('#wrk_groupz-available_groupz');
     // Select Box ID
     searchFromList($(this).val(), searchArea);
   });
   $('#update').click(function() {
     $('#wrk_groupz-selected_groupz option').prop('selected', true);
   });
 });
</script>

{% endblock head_js %}

{% block body %}

<div id='dn'> Nom LDAP : {{ dn }}</div> <br/>

<form method="post" action="/edit_user/{{ page.label}}/{{ uid }}">
  {% for field in fieldz %}
    {% if 'FieldList' in get_type(get_attr(form, field.label)) %}
        {{ render_fieldlist(form, field) }}
    {% else %}
        {{ render_formfield(get_attr(form, field.label))}}
    {% endif  %}
  {% endfor  %}
   <input id="searchGroupzFilter" type="text"/>
  {{ render_formfield(form.wrk_groupz)}}
  <input id="update" type="submit" value="Mettre Ã  jour" >
</form>

{% endblock body %}
